
;; fish like
(use-package esh-autosuggest
    :defines ivy-display-functions-alist
    :bind (:map eshell-mode-map
           ([remap eshell-pcomplete] . completion-at-point))
    :hook ((eshell-mode . esh-autosuggest-mode)
           (eshell-mode . eshell-setup-ivy-completion))
    :init (defun eshell-setup-ivy-completion ()
            "Setup `ivy' completion in `eshell'."
            (setq-local ivy-display-functions-alist
                        (remq (assoc 'ivy-completion-in-region
                                     ivy-display-functions-alist)
                              ivy-display-functions-alist))))
(provide 'init-eshell)
